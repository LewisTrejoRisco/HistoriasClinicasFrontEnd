<ng-template #modalRegistrar let-close="close">
    <div class="modal-header">
        <h5 class="modal-title">{{ modalDataRese?.titulo }}</h5>
        <button type="button" class="close" (click)="close()">
        <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <form #companiaForm="ngForm" (ngSubmit)="registrar(companiaForm)">
        <div class="modal-body">
            <div class="card-content">
                <div class="card-body">
                    <div class="row">
                      <div class="col-lg-12 col-md-12 col-sm-12">
                        <div class="form-group">
                          <div *ngIf="flagformtransaccion && !modalDataRese?.transaccion.tcodipues" 
                          class="help-block mt-1 text-danger"> 
                            <i class="ft-alert-circle align-middle"></i> El puesto es requerido
                          </div>
                          <label for="idtiporeserva">Puesto colaborador</label>
                          <div class="controls">
                            <ng-select  [items]="listPues" 
                                        placeholder="Puesto" 
                                        bindLabel="tdescpues" 
                                        bindValue="tcodipues"
                                        [(ngModel)]="modalDataRese?.transaccion.tcodipues"
                                        id="tcodipues"
                                        name="tcodipues"
                                        [disabled]="modalDataRese?.transaccion.tcodipues"
                                        required>
                            </ng-select>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-12 col-md-12 col-sm-12">
                        <div class="form-group">
                          <div *ngIf="flagformtransaccion && !modalDataRese?.transaccion.idRol" 
                          class="help-block mt-1 text-danger"> 
                            <i class="ft-alert-circle align-middle"></i> El rol es requerido
                          </div>
                          <label for="idtiporeserva">Rol colaborador</label>
                          <div class="controls">
                            <ng-select  [items]="listRol" 
                                        placeholder="Rol" 
                                        bindLabel="descripcion" 
                                        bindValue="idRol"
                                        [(ngModel)]="modalDataRese?.transaccion.idRol"
                                        id="idRol"
                                        name="idRol"
                                        [disabled]="modalDataRese?.transaccion.idRol"
                                        required>
                            </ng-select>
                          </div>
                        </div>
                      </div>
                      <div class="col-lg-12 col-md-12 col-sm-12" *ngIf="flagtrans">
                        <div class="form-group">
                          <div class="custom-switch custom-switch-success custom-control-inline mb-1 mb-xl-0" >
                            <input type="checkbox"
                                  class="custom-control-input"
                                  [id]="'color-switch-' + modalDataRese?.transaccion.tcodipues + '-' + modalDataRese?.transaccion.idRol"
                                  [checked]="modalDataRese?.transaccion.tstatus === 1"
                                  (change)="onCheckboxChangeModal(modalDataRese?.transaccion, $event)" >
                            <label class="custom-control-label mr-1" [for]="'color-switch-' + modalDataRese?.transaccion.tcodipues + '-' + modalDataRese?.transaccion.idRol">
                              <span>Activo</span>
                            </label>
                          </div>
                        </div>
                      </div>
                      
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer taskboard-modal-footer">
        <button class="btn btn-outline-secondary" >{{ modalDataRese?.action }}</button>
        </div>
    </form>
</ng-template>
<div class="row match-height">
    <div class="col-xl-12 col-lg-12">
        <div class="card">
          <div class="card-content">
            <div class="card-header font-small-1">
                <label class="font-small-1">Usuarios</label>
                <button type="button" class="d-inline-block btn btn-secondary mr-1 float-right" (click)="modalAgregarAtencion(0, null)" >Agregar</button>
            </div>
            <div class="card-body font-small-1">
              <p class="grey"></p>
              <ngx-datatable #tableRowDetails class="bootstrap core-bootstrap font-small-2 tabla-de-datos" [columnMode]="ColumnMode.force" 
              [rows]="listUsua" [rowHeight]="30" [limit]="10" [headerHeight]="50" [footerHeight]="50" [scrollbarH]="true">
                <ngx-datatable-column name="Código puesto" prop="tcodipues" [width]="50"></ngx-datatable-column>
                <ngx-datatable-column name="Descripción puesto" prop="tdescpues" [width]="120"></ngx-datatable-column>
                <ngx-datatable-column name="Rol" prop="codigo" [width]="80"></ngx-datatable-column>
                <ngx-datatable-column name="Descripción Rol Médico" prop="descripcion" [width]="120"></ngx-datatable-column>
                <ngx-datatable-column name="Estado" prop="tstatus" [width]="50">
                  <ng-template let-status="value" ngx-datatable-cell-template>
                    <div class="badge badge-pill"
                      [ngClass]="{'bg-light-danger': status == '0', 'bg-light-success':status == '1' }">
                      {{ status == 1 ? "Activo" : "Inactivo" }}
                    </div>
                  </ng-template>
                </ngx-datatable-column>
                <!-- <ngx-datatable-column name="Estado" prop="tstatus" [width]="50">
                  <ng-template let-row="row" ngx-datatable-cell-template >
                    <div class="custom-switch custom-switch-success custom-control-inline mb-1 mb-xl-0" >
                      <input type="checkbox"
                             class="custom-control-input"
                             [id]="'color-switch-' + row.tcodipues + '-' + row.codigo"
                             [checked]="row.tstatus === 1"
                             (change)="onCheckboxChange(row, $event)" >
                      <label class="custom-control-label mr-1" [for]="'color-switch-' + row.tcodipues + '-' + row.codigo">
                        <span>Activo</span>
                      </label>
                    </div>
                  </ng-template>
                </ngx-datatable-column> -->
                  
                  <ngx-datatable-column name="Acción" [width]="100">
                      <ng-template let-row="row" let-name="value" ngx-datatable-cell-template>
                      <!-- <i class="ft-eye text-primary cursor-pointer mr-2"></i> -->
                      <i class="ft-edit text-primary cursor-pointer mr-2"
                      (click)="modalAgregarAtencion(1, row)"></i>
                      <i class="ft-x text-primary cursor-pointer"
                      (click)="modalEliminar(row)"></i>
                      </ng-template>
                  </ngx-datatable-column>
              </ngx-datatable>
            </div>
          </div>
        </div>
    </div>
</div> 